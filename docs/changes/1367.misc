Refactor ``known_failures.py`` to use a compact DSL instead of deeply
nested condition statements.
